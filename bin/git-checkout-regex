#!/bin/bash

if [ "$*" = "" ]
then
  echo "nothing to do"
  exit 0
fi

if [[ "$1" == -* ]]
then
  git checkout $*
else
  branchListCommand="git branch | grep $1 | grep -v detached"
  branchesCount=`eval "$branchListCommand -c"`
  branches=`eval "$branchListCommand | sed 's/[ *]//g'"`
  
  if [ $branchesCount -eq 0 ]
  then

    git show $1 > /dev/null 2> /dev/null
    result=$?

    if [ "$result" -eq 0 ]
    then
      git checkout $1
    else
      echo "no branch nor commit hash found"
      exit 0
    fi
  fi
  if [ $branchesCount -ge 2 ]
  then
    echo "multiples branches found : "
    echo "$branches"
    exit 0
  fi

  git checkout $branches
fi

